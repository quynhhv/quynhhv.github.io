<div style="max-width:400px;margin:40px auto;padding:24px;border:1px solid #ccc;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.05);">
    <label for="website-link" style="display:block;margin-bottom:8px;font-weight:500;">Enter website URL:</label>
    <input type="text" id="website-link" placeholder="https://example.com" style="width:100%;padding:8px 12px;border:1px solid #bbb;border-radius:4px;margin-bottom:12px;font-size:16px;" />
    <button id="submit-link" type="button" disabled style="width:100%;padding:10px 0;background:#007bff;color:#fff;border:none;border-radius:4px;font-size:16px;cursor:pointer;opacity:0.7;">Submit</button>
</div>
<script>
    // Function to check if URL is valid
    function isValidUrl(url) {
        try {
            const u = new URL(url);
            return u.protocol === "http:" || u.protocol === "https:";
        } catch (e) {
            return false;
        }
    }

    // Function to get params from current page URL
    function getParamsFromCurrentPage() {
        const params = {};
        const searchParams = new URLSearchParams(window.location.search);
        for (const [key, value] of searchParams.entries()) {
            params[key] = value;
        }
        return params;
    }

    // Example: log params of current page
    console.log('Current page params:', getParamsFromCurrentPage());
    console.log("localstorage", localStorage);

    // Function to get location/accountId from GHL (GoHighLevel) URL
    function getGhlLocationIdFromUrl(url) {
        try {
            const u = new URL(url);
            // GHL locationId is usually in path or query, e.g. /locations/{locationId}/... or ?location_id=xxx
            // Prefer path
            const pathMatch = u.pathname.match(/\/locations\/([^\/]+)/);
            if (pathMatch && pathMatch[1]) {
                return pathMatch[1];
            }
            // If not in path, try query
            const params = new URLSearchParams(u.search);
            if (params.has('location_id')) {
                return params.get('location_id');
            }
            return null;
        } catch (e) {
            return null;
        }
    }

    // Function to get params from any URL (different from getParamsFromCurrentPage)
    function getParamsFromUrl(url) {
        const params = {};
        try {
            const u = new URL(url);
            for (const [key, value] of u.searchParams.entries()) {
                params[key] = value;
            }
        } catch (e) {}
        return params;
    }
    const input = document.getElementById('website-link');
    const button = document.getElementById('submit-link');

    input.addEventListener('input', function() {
        if (isValidUrl(input.value.trim())) {
            button.disabled = false;
            button.style.opacity = 1;
        } else {
            button.disabled = true;
            button.style.opacity = 0.7;
        }
    });

    button.addEventListener('click', function() {
        const url = input.value.trim();
        if (isValidUrl(url)) {
            const params = getParamsFromUrl(url);
            alert('URL parameters: ' + JSON.stringify(params));
        } else {
            alert('Invalid link');
        }
    });
</script>
